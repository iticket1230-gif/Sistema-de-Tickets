<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Tickets - Centro Nacional Colombo Alemán</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="logopagina.png">
    <link rel="apple-touch-icon" sizes="180x180" href="logopagina.png">
</head>

<body>
    <header>
        <h1>Sistema de Tickets de Soporte Técnico</h1>
        <h3>Centro Nacional Colombo Alemán - Regional Atlántico</h3>
    </header>

    <!-- ========== LOGIN ========== -->
    <section id="loginSection">
        <h2>Iniciar Sesión</h2>
        <form id="loginForm">
            <!-- Tipo de usuario -->
            <label for="role">Tipo de usuario:</label>
            <select id="role" name="role" required>
        <option value="">Seleccione...</option>
        <option value="admin">Administrador</option>
        <option value="user">Usuario</option>
      </select>

            <label for="username">Usuario:</label>
            <input type="text" id="username" name="username" required placeholder="Ingrese su usuario">

            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" required placeholder="Ingrese su contraseña">

            <button type="submit">Ingresar</button>
            <p id="errorLogin" class="error-message">Usuario, contraseña o rol incorrectos</p>
        </form>
    </section>

    <!-- ========== SISTEMA DE TICKETS ========== -->
    <section id="ticketSection" style="display:none;">
        <h2>Crear un Nuevo Ticket</h2>

        <!-- IMPORTANTE: action apunta a tu correo en FormSubmit -->
        <form class="ticket-form" id="ticketForm" action="https://formsubmit.co/iticket1230@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">
            <label for="nombre">Nombre completo: <span class="required">*</span></label>
            <input type="text" id="nombre" name="nombre" required placeholder="Ingrese su nombre completo">

            <label for="email">Correo electrónico: <span class="required">*</span></label>
            <input type="email" id="email" name="email" required placeholder="ejemplo@correo.com">

            <label for="telefono">Teléfono (opcional):</label>
            <input type="tel" id="telefono" name="telefono" placeholder="Número de contacto">

            <label for="asunto">Asunto del problema: <span class="required">*</span></label>
            <input type="text" id="asunto" name="asunto" required placeholder="Resumen breve del problema">

            <label for="descripcion">Descripción detallada: <span class="required">*</span></label>
            <textarea id="descripcion" name="descripcion" rows="5" required placeholder="Describa el problema con el mayor detalle posible, incluyendo pasos para reproducirlo si aplica"></textarea>

            <label for="categoria">Categoría: <span class="required">*</span></label>
            <select id="categoria" name="categoria" required>
        <option value="">Seleccione una categoría</option>
        <option value="hardware">Hardware (Equipos, impresoras, etc.)</option>
        <option value="software">Software (Aplicaciones, sistemas)</option>
        <option value="redes">Redes e Internet</option>
        <option value="email">Correo electrónico</option>
        <option value="acceso">Accesos y permisos</option>
        <option value="otro">Otro</option>
      </select>

            <label for="prioridad">Prioridad:</label>
            <select id="prioridad" name="prioridad">
        <option value="baja">Baja</option>
        <option value="media" selected>Media</option>
        <option value="alta">Alta</option>
        <option value="critica">Crítica</option>
      </select>

            <button type="submit">Enviar Ticket</button>
        </form>

        <div class="success-message" id="successMessage"></div>
        <div class="error-message" id="errorMessage"></div>

        <div class="info">
            <strong>Metodología Ágil - SCRUM:</strong> Se realizarán SPRINTS para verificar el avance del proyecto y mejorar continuamente nuestros servicios de soporte técnico.
            <br><br>
            <strong>Tiempo de respuesta:</strong>
            <ul>
                <li>Crítica: 2 horas</li>
                <li>Alta: 4 horas</li>
                <li>Media: 24 horas</li>
                <li>Baja: 48 horas</li>
            </ul>
        </div>

        <!-- Historial de Tickets - Solo visible para Administrador -->
        <div id="ticketHistory" style="display:none;">
            <h2>Historial de Tickets</h2>
            <div id="historyList"></div>
        </div>
    </section>

    <!-- ========== SCRIPT ========== -->
    <script>
        // -------- LOGIN --------
        const loginForm = document.getElementById('loginForm');
        const errorLogin = document.getElementById('errorLogin');

        // Lista de usuarios con rol, nombre y contraseña
        const users = [{
                role: "user",
                username: "luis muñoz",
                password: "1234"
            }, {
                role: "admin",
                username: "jesus campo",
                password: "1234"
            }, {
                role: "admin",
                username: "luis muñoz",
                password: "1234"
            }, {
                role: "user",
                username: "jean martinez",
                password: "1234"
            }
            // Agrega más usuarios aquí
        ];

        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const role = document.getElementById('role').value;
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();

            // Buscar usuario válido
            const user = users.find(u => u.role === role && u.username === username && u.password === password);

            if (user) {
                document.getElementById('loginSection').style.display = 'none';
                document.getElementById('ticketSection').style.display = 'block';

                // Mostrar historial solo si es administrador
                if (role === "admin") {
                    document.getElementById('ticketHistory').style.display = 'block';
                } else {
                    document.getElementById('ticketHistory').style.display = 'none';
                }
                errorLogin.style.display = 'none';
            } else {
                errorLogin.style.display = 'block';
            }
        });
    </script>
</body>

</html>